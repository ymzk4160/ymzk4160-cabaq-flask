# app/scripts/insert_additional_data.py
from app import create_app
from app.extensions import db
from app.models.category import Category
from app.models.question import Question
from app.models.answer import Answer
from app.models.user import User

def insert_additional_data():
    """追加のカテゴリーとデータをデータベースに投入する関数"""
    # アプリケーションコンテキストを作成
    app = create_app()
    with app.app_context():
        try:
            # 既存のデータを確認
            existing_user = User.query.filter_by(email='test@example.com').first()
            if not existing_user:
                # ユーザーの作成
                user = User(
                    email='test@example.com',
                    nickname='テストユーザー',
                    password_hash='dummy_hash'
                )
                db.session.add(user)
                db.session.flush()  # IDを取得
            else:
                user = existing_user
                
            # 追加のカテゴリーを作成
            new_categories = ['バースデイ', '恋愛', 'プライベート']
            categories = {}
            
            # データベースに既に存在するカテゴリーを取得
            existing_categories = Category.query.all()
            for cat in existing_categories:
                categories[cat.name] = cat
            
            # 新しいカテゴリーを追加
            for cat_name in new_categories:
                if cat_name not in categories:
                    category = Category(name=cat_name)
                    db.session.add(category)
                    db.session.flush()
                    categories[cat_name] = category
            
            # 一度コミットして ID を確定させる
            db.session.commit()
            
            # 追加の質問と回答のデータ
            additional_data = [
                # バースデイカテゴリー
                {
                    'title': 'バースデイイベント、お客様の反応は？',
                    'content': '初めてバースデイイベントを開催しようと思っています。お客様の反応やコスパなど、実際にやったことがある方の体験談を教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        'お店によって違いますが、私の場合は事前に告知して常連さんに来てもらいました。ドレスは特別感のあるものを選び、ケーキやシャンパンなども準備。金銭的には持ち出しもありましたが、それ以上にたくさんのお祝いをもらえて、新規のお客様も増えたので結果的には大成功でした！',
                        '私はシンプルに行いましたが、インスタやSNSでの告知効果が大きかったです。特に写真映えするケーキやデコレーションを準備すると、その場にいないお客様にも認知してもらえて、次回につながりました。'
                    ]
                },
                {
                    'title': 'バースデイのドレス選び、どうしていますか？',
                    'content': '来月バースデイイベントをするのですが、特別なドレスを着ようと思っています。みなさんはどんなドレスを選びますか？予算や購入場所なども教えていただけると嬉しいです。',
                    'category': 'バースデイ',
                    'answers': [
                        'バースデイは普段より少し派手目、かつ自分らしさを出すドレスがいいと思います。私は25,000円くらいのものを買いました。お店のコンセプトにもよりますが、カラードレスだとより特別感が出ますよ。ネットだとRady、JEWELS、DURASあたりがおすすめです。',
                        'レンタルという選択肢もあります。私はJJドレスなどで借りることが多いです。1回きりのバースデイなら、購入より断然お得。ただし早めに予約することをお勧めします。人気のデザインはすぐに埋まってしまいますよ。'
                    ]
                },
                {
                    'title': 'バースデイプレゼントの相場ってどれくらい？',
                    'content': 'バースデイを開催した方、どれくらいのプレゼントをもらいましたか？また、お返しは何かしていますか？',
                    'category': 'バースデイ',
                    'answers': [
                        '常連さんから3〜5万円くらいのブランド品（財布や小物）、それ以外の方からは1〜2万円くらいのお酒やちょっとしたギフトが多かったです。お返しは特別にしていませんが、次回来店時にドリンク1杯無料にしてもらえるようにお店と相談しました。',
                        '私の場合は合計で20万円くらいになりました。お返しはしっかりしました。プレゼントくれた方全員に手書きのメッセージカードと、金額に応じて小さなプレゼント（3000〜5000円程度）を渡しました。「覚えていてくれた」という印象が大事だと思います。'
                    ]
                },
                {
                    'title': 'バースデイの告知方法で効果的なのは？',
                    'content': '初めてのバースデイでお客様にどう告知すれば効果的ですか？SNS、お店のホームページ、直接声掛けなど、実際に効果があった方法を教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        '私の経験では、LINEでの個別メッセージが一番効果的でした。特に常連さんには1ヶ月前から告知して、予定を空けてもらうよう早めにお願いしました。インスタにはイベント内容やドレスのイメージ写真を載せて、興味を持ってもらえるよう工夫しました。',
                        '直接の声掛けが一番効果的です。来店時に「実は来月バースデイで…」と伝えると、ほとんどの方が来てくれる約束をしてくれました。SNSはフォロワーが多くないと効果が薄いので、まずは顔を覚えてもらっているお客様への直接アプローチをおすすめします。'
                    ]
                },
                {
                    'title': 'バースデイの予算はどれくらいかけてる？',
                    'content': 'バースデイイベントの予算はどれくらいかけていますか？ドレス代、ヘアメイク代、デコレーション費用など、内訳も教えていただけると参考になります。',
                    'category': 'バースデイ',
                    'answers': [
                        'ドレス代が3万円、ヘアメイクが1万5千円、ネイルが1万円、小物（ティアラなど）が5千円、デコレーション（バルーンなど）が1万円で、合計7万円くらいでした。これにプラスして当日のセット料金（シャンパンやケーキ）で3万円ほど。合計10万円くらいかかりましたが、もらったプレゼントを考えると十分元は取れました。',
                        '私は全部で5万円以内に抑えました。ドレスはレンタル（1万5千円）、ヘアメイクは普段お願いしている美容師さんに少しアレンジしてもらう程度（1万円）、デコレーションはお店のスタッフに相談して最低限（5千円程度）、あとはケーキ代などで1万円くらい。あまり派手にしなくても、お客様は喜んでくれましたよ。'
                    ]
                },
                {
                    'title': 'バースデイでトラブルになったことある？',
                    'content': 'バースデイイベントで何かトラブルになったことはありますか？気をつけるべきポイントなど教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        '私の場合は、来ると言っていた常連さんが当日キャンセルになり、予約していたテーブルが空いてしまったことがありました。対策としては、余裕を持った席予約と、キャンセルになっても大丈夫なよう複数の常連さんに声をかけておくことをお勧めします。',
                        '同じ日に他の子のバースデイと被ってしまい、お店の雰囲気が分散してしまったことがあります。事前にお店のスケジュールをしっかり確認して、できれば自分だけの日を確保することをお勧めします。あとは、プレゼントの管理も重要です。高額なものは必ず自分で管理し、その場で開封せずに持ち帰るようにしています。'
                    ]
                },
                {
                    'title': 'バースデイシャンパンのおすすめは？',
                    'content': 'バースデイでシャンパンタワーをしようと思っています。おすすめのシャンパンや価格帯を教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        'シャンパンタワーなら、モエ・エ・シャンドンのロゼが映えると思います。ピンク色が女性らしくて写真映えもします。6〜8本使うとして10〜15万円くらいの予算でしょうか。事前にお店に相談して、タワー用のグラスやセッティングを確認しておくといいですよ。',
                        '私はドンペリのロゼを使いました。確かに高いですが（1本3万円くらい）、「特別感」が全然違います。シャンパンタワーは、事前にスタッフに練習してもらうことをお勧めします。流す瞬間が盛り上がるポイントなので、スムーズに行えるよう準備が大切です。'
                    ]
                },
                {
                    'title': 'バースデイの写真撮影のコツは？',
                    'content': 'バースデイで写真をたくさん撮りたいです。おしゃれに見える撮り方や準備すべきものなど、アドバイスをお願いします。',
                    'category': 'バースデイ',
                    'answers': [
                        '私は事前に友達のカメラマンに頼んで、プロのカメラで撮影してもらいました。スマホで撮るなら、お店の照明が暗いことが多いので、小さな補助ライトを持参するといいですよ。あとは、「バースデイ」と書かれたフォトプロップスや、手持ちのキラキラしたアイテムを用意しておくと写真が華やかになります。',
                        '写真映えするアングルを事前に考えておくといいです。ケーキやシャンパンタワーのセッティング場所、バックの装飾など、お店とも相談しておきましょう。また、スマホでの自撮りだけでなく、一眼レフカメラで撮影してくれるスタッフがいるか確認しておくと安心です。私は写真集を作るつもりで、様々なシーンやポーズを事前にメモしておきました。'
                    ]
                },
                {
                    'title': 'バースデイ後のお礼、どうしてる？',
                    'content': 'バースデイに来てくれたお客様へのお礼はどうしていますか？特に印象に残る方法があれば教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        '私は全員に手書きのメッセージカードを用意しました。バースデイから1週間以内に渡すようにして、「あの日は来てくれてありがとう」と伝えています。プレゼントをくれた方には、金額に関わらず小さなお返し（チョコレートや焼き菓子の詰め合わせなど）も添えています。個人的なメッセージが一番喜ばれると思います。',
                        'SNSでの感謝投稿も効果的です。バースデイの写真と共に、「素敵な時間をありがとうございました」というメッセージを投稿しています。ただし、お客様の顔が写らないよう配慮は必要です。あとは次回来店時に、少し長めにお席に付くなど、特別感を出すサービスをしています。'
                    ]
                },
                {
                    'title': 'バースデイ特典、みなさんどんなのありますか？',
                    'content': 'お店によってバースデイ特典があると思いますが、どんな特典がありますか？また、自分でお店と交渉して特別なことをしてもらった経験はありますか？',
                    'category': 'バースデイ',
                    'answers': [
                        '私のお店では基本的に「ケーキ代とシャンパン1本のサービス」という特典があります。でも、店長と相談して「その日だけ指名料半額」という特別ルールを作ってもらいました。これがかなり効果的で、多くのお客様に指名してもらえました。交渉次第で色々とアレンジできると思いますよ。',
                        '私の店ではバースデイの子はドレスコード（店の制服）が免除され、好きな服装でOKという特典があります。あとは、バースデイ週間として1週間特別扱いしてもらえるのが嬉しいです。例えば、1週間は指名のノルマが無かったり、最上級のドリンクがサービスだったり。長く働いている子ほど特典が豪華な傾向がありますね。'
                    ]
                },
                {
                    'title': 'バースデイのヘアメイク、どうしてる？',
                    'content': 'バースデイ当日のヘアメイクはどうしていますか？普段より特別にしてますか？また、おすすめの美容院などあれば教えてください。',
                    'category': 'バースデイ',
                    'answers': [
                        '私はいつもと違う美容院を予約して、特別感を出すようにしています。事前に「バースデイイベントがある」と伝えておくと、より華やかに仕上げてくれますよ。エクステやつけまつげも普段より豪華にして、ヘアアクセサリーもキラキラしたものを選んでいます。',
                        '私は逆に、いつもお願いしている美容師さんにお願いしています。普段の自分をよく知っている人の方が、「特別な自分」を引き出してくれるような気がして。ただ、時間は普段の倍くらい（2〜3時間）かけてもらっています。ヘアスタイルは、自分の顔立ちに合わせた上で、いつもと違う雰囲気を出してもらうのがおすすめです。'
                    ]
                },

                # 恋愛カテゴリー
                {
                    'title': 'お客様との恋愛、経験者いますか？',
                    'content': '長く通ってくれているお客様から告白されました。店外でのお付き合いについて悩んでいます。実際に経験した方の体験談や注意点を教えてください。',
                    'category': '恋愛',
                    'answers': [
                        '私は今の彼氏がお客様でした。付き合う前に「仕事は仕事、プライベートはプライベート」とはっきり線引きしました。最初は仕事に口出しされることもありましたが、話し合って理解してもらいました。付き合うなら、お互いの境界線をしっかり決めることが大事です。',
                        '個人的には避けた方が無難だと思います。私の周りでも上手くいった例より、トラブルになったケースの方が多いです。特に「自分が贔屓にされていない」と感じると、急に態度が変わる人もいます。それでも付き合うなら、必ずお店には報告しておくべきです。'
                    ]
                },
                {
                    'title': '彼氏に仕事のことを隠しています',
                    'content': '付き合って半年の彼氏がいますが、キャバ嬢であることを隠しています。「夜のカフェで働いている」と言っていますが、最近嘘をついていることに罪悪感があります。カミングアウトすべきでしょうか？',
                    'category': '恋愛',
                    'answers': [
                        '私も同じ経験があります。長く続けるなら早めに話した方がいいです。ただ、いきなり全部話すのではなく、徐々に「接客の仕事をしている」「お酒を出す店で働いている」と少しずつ真実に近づけていくのがおすすめです。彼の価値観や反応を見ながら進めていくといいですよ。',
                        '彼氏の性格や価値観によると思います。私の場合は、結局カミングアウトした後に別れることになりました。でも「嘘をついていた期間が長かったこと」が一番のショックだったと言われました。信頼関係を築きたいなら、勇気を出して話す方がいいかもしれません。'
                    ]
                },
                {
                    'title': '同じ店内での恋愛トラブル、対処法は？',
                    'content': '同じお店の女の子と同じお客様を好きになってしまいました。その子は露骨に私の悪口をお客様に言っているようです。どう対処するべきでしょうか？',
                    'category': '恋愛',
                    'answers': [
                        '仕事とプライベートは分けるべきです。お店では徹底的にプロフェッショナルを貫き、その女の子とは必要最低限の挨拶だけにして、悪口には一切反応しないことをお勧めします。お客様に関しても、自分から積極的にアプローチするのではなく、自然体で接することが長い目で見ると効果的です。',
                        '店長や幹部に相談してみるのはどうでしょうか。直接的な解決は難しいかもしれませんが、状況を知っておいてもらうことで、今後エスカレートした時に対処してもらいやすくなります。それと、そのお客様があなたを本当に大切に思っているなら、他の子の悪口は気にしないはずです。'
                    ]
                },
                {
                    'title': '彼氏の嫉妬がひどくて仕事に支障が…',
                    'content': '彼氏が仕事に対して嫉妬深く、毎日のように「誰と話したか」「どんなことをしたか」を詳しく聞いてきます。最近は仕事中もLINEがたくさん来て、集中できません。どう対応すればいいでしょうか？',
                    'category': '恋愛',
                    'answers': [
                        '私も似たような経験があります。まずはきちんと話し合いの場を設けて、「仕事中のLINEは返せない」「仕事とプライベートは別」というルールを明確にしました。彼の不安を和らげるために、休日は一緒に過ごす時間を増やしたり、終電で帰ることを約束したりと、譲れる部分では歩み寄りました。お互いの歩み寄りが大切です。',
                        '残念ながら、私の場合は最終的に別れを選びました。何度話し合っても改善されず、精神的に疲れ果ててしまったからです。この仕事を続ける以上、相手の嫉妬心が強すぎると長続きは難しいかもしれません。自分の精神状態を最優先に考えることも大切ですよ。'
                    ]
                },
                {
                    'title': '客として通っていた人と恋愛関係に',
                    'content': 'お客様だった人と恋愛関係になりました。お店には内緒にしていますが、このままでいいのか悩んでいます。皆さんならどうしますか？',
                    'category': '恋愛',
                    'answers': [
                        'お店のルールによると思いますが、多くの場合はお店に報告した方が良いです。特に常連さんだった場合は、他のスタッフも気づいていることが多いですし、後からバレて問題になるよりは、先に正直に話しておく方がトラブルになりにくいです。',
                        '私は似たような状況でしたが、結局お店に話しました。すると意外にも「プライベートは自由だけど、お店では普通に接客してね」と言われただけでした。ただ、彼がお店に来なくなったので売上は下がりましたが、その分プライベートでの関係は良好になりました。お店と彼氏、どちらを優先するかによって決めるといいと思います。'
                    ]
                },
                {
                    'title': '元カレがお店に来るようになりました',
                    'content': '別れた元カレが最近私の勤めるお店に来るようになりました。他の子を指名していますが、私を見ると嫌みを言ってきます。どう対応すべきでしょうか？',
                    'category': '恋愛',
                    'answers': [
                        'まずは店長や責任者に状況を説明しておくことをお勧めします。そうすれば、何かあった時に適切に対応してもらえます。元カレ本人には極力関わらず、必要以上の会話は避け、プロフェッショナルな態度を崩さないことが大切です。挑発に乗らず、冷静に対応しましょう。',
                        'これは完全な嫌がらせだと思います。私も似たような経験がありますが、無視を続けていたらそのうち来なくなりました。でも、悪質な場合は店側に相談して出禁にしてもらうことも検討した方がいいかもしれません。あなたの精神的な安全が最優先です。'
                    ]
                },
                {
                    'title': '彼氏がほしいけど出会いがない',
                    'content': 'キャバ嬢を始めてから2年経ちますが、彼氏ができません。合コンなど一般的な出会いの場にもなかなか行けず、お客様以外の男性と知り合う機会がありません。皆さんはどうやって恋人を見つけてますか？',
                    'category': '恋愛',
                    'answers': [
                        '私は友達の紹介で今の彼氏と知り合いました。キャバ嬢ということも最初から伝えて、理解してくれる人だったので良かったです。あとは、趣味のコミュニティ（ヨガ教室とか料理教室など）で知り合うのもおすすめです。共通の趣味があると会話も弾みますし、自然な出会いになります。',
                        '私はマッチングアプリを使っています。最初は職業を伏せていましたが、会って話が合いそうだと思ったら正直に話すようにしています。確かに引かれることもありますが、「理解してくれる人だけでいい」と割り切ることも大切かなと思います。あとは、スナックや他業種の飲み会など、違う世界の人と知り合える場所に顔を出すのも良いですよ。'
                    ]
                },
                {
                    'title': '彼氏と将来の話、みんなどうしてる？',
                    'content': '彼氏と将来について話すとき、この仕事をいつまで続けるかなど、どのように話していますか？特に結婚を考えている方、アドバイスをお願いします。',
                    'category': '恋愛',
                    'answers': [
                        '私は彼氏とはっきり期限を決めています。「30歳までは仕事を続けて、それまでに○○円貯めたら辞める」と具体的な計画を共有しています。お互いの将来の夢や目標をオープンに話し合うことで、彼も応援してくれるようになりました。',
                        '私は「結婚したら辞める」と彼に約束しています。ただ、貯金目標があるので、プロポーズされても「あと1年だけ」とお願いするつもりです。大切なのは嘘をつかないことと、お互いが納得できる妥協点を探すこと。一方的に「すぐ辞めて」と言われても困りますし、彼の気持ちも尊重したいですよね。'
                    ]
                },
                {
                    'title': '一般の男性との付き合い方の違い',
                    'content': 'お客様ではない一般の男性と付き合う時、接し方や気をつけることはありますか？キャバ嬢の癖が出てしまって、彼氏に「営業トークみたい」と言われてしまいました。',
                    'category': '恋愛',
                    'answers': [
                        '私も同じ経験があります！特に意識していないのに「それ、仕事モードだよね」と言われることがあります。私の場合は、「この話題は興味ない」というときでも相槌を打ってしまうクセがありました。今は意識的に「それはあまり詳しくないんだ」と正直に言うようにしています。一般の恋愛では、100%相手に合わせなくていいんですよね。',
                        '接客業の癖って本当に抜けないですよね。私の場合は、彼氏にもついつい「この話どう？」みたいに質問ばかりしてしまいがちでした。今は「まず自分の話から始める」「自分の正直な意見を言う」というルールを自分に課しています。あとは、プライベートでは相手の目を見る時間を減らすとか、少し距離を取るとか、仕事との違いを意識するのも良いかもしれません。'
                    ]
                },
                {
                    'title': '彼氏の親に職業を隠している',
                    'content': '彼氏のご両親に挨拶する機会がありますが、職業をどう説明すべきか悩んでいます。彼氏には本当のことを話していますが、ご両親には「バーテンダー」と言うつもりです。同じような経験をした方いますか？',
                    'category': '恋愛',
                    'answers': [
                        ''私も同じような経験があります。私の場合は「カフェ＆バーで働いている」と説明しました。完全な嘘ではないので罪悪感も少なかったです。ただ、将来的に結婚など考えるなら、いずれは正直に話す機会が必要かもしれません。嘘が長く続くほど、後で話すのが難しくなりますよ。',
                        '私は彼氏と相談して「飲食店の接客業」と伝えました。細かいことは聞かれない限り説明しないようにしています。親世代に理解してもらうのは難しいですし、彼氏の親との関係が悪くなるリスクを考えると、あえて詳しく話す必要はないと思います。ただ、彼氏とはしっかり話し合って、同じ説明をするようにしましょう。'
                    ]
                },
                {
                    'title': '仕事が忙しくて彼氏との時間が取れない',
                    'content': '恋人との時間が取れず、関係が冷めてきている気がします。皆さんはどうやって仕事と恋愛のバランスを取っていますか？',
                    'category': '恋愛',
                    'answers': [
                        '私は「デートの日」を必ず確保するようにしています。例えば毎週月曜日は絶対に休みにして、彼との時間に充てています。あとはLINEでこまめに連絡を取り合うことも大切です。短い動画メッセージを送ったり、ちょっとした日常を共有したりして、離れていても繋がりを感じられるようにしています。',
                        '私は「質」で勝負しています。会える時間は短くても、その時間を特別なものにするよう心がけています。例えば、彼の好きな料理を作っておいたり、サプライズでプレゼントを用意したり。あとは、将来の計画や目標を一緒に立てることで、「一緒に頑張っている」という気持ちを共有しています。理解のある彼氏なら、今は仕事を頑張る時期だということを応援してくれるはずです。'
                    ]
                },

                # プライベートカテゴリー
                {
                    'title': '仕事とプライベートの切り替え方',
                    'content': '仕事モードから抜け出せず、休日もキャバ嬢気分が抜けません。皆さんはどうやって切り替えていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は「帰宅後のルーティン」を決めています。メイクを落とす→シャワーを浴びる→部屋着に着替える、という一連の流れで意識的に切り替えています。また、休日は敢えて華やかな場所を避け、自然の多い公園や映画館など静かな場所で過ごすようにしています。',
                        '友人との時間が大切です。特に業界外の友人と会う時間を作ると、自然と「普通の自分」に戻れます。あとは趣味に没頭するのも効果的。私は料理教室に通っていますが、その時間だけは完全に別の自分になれる気がします。'
                    ]
                },
                {
                    'title': '休日の過ごし方、みんなどうしてる？',
                    'content': '夜職で働いているとどうしても生活リズムが崩れがちです。皆さんは休日、特に昼間の時間をどう過ごしていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は平日の昼間に美容院や買い物に行くようにしています。混雑を避けられるし、ゆっくり過ごせるのがメリットです。あとは昼寝を取り入れて、夜に溜まった睡眠負債を返すようにしています。',
                        '私は意識的に朝型生活を取り入れています。出勤日でも10時には起きて、太陽の光を浴びるようにしています。体内時計が完全に狂わないよう、朝ごはんもしっかり食べます。休日は早起きして午前中にジムに行くと、その日一日が有意義に過ごせる気がします。'
                    ]
                },
                {
                    'title': '職業を親にどう説明してる？',
                    'content': '実家暮らしではないですが、親には「普通のバーで働いている」と言っています。正直に話した方がいいのか迷っています。皆さんはどうしていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は25歳の時に正直に話しました。最初は「危険じゃないか」「辞めた方がいい」と言われましたが、「ちゃんと稼いでいること」「将来のための貯金もしていること」を伝えて、徐々に理解してもらいました。親との関係性にもよりますが、長期的には正直な方が心が楽になります。',
                        '私は今でも言っていません。親世代には理解してもらえないと思っているので、「高級バーの接客スタッフ」と伝えています。親が心配するより、私自身が自分の選択に自信を持って、しっかり将来設計をすることの方が大事だと思っています。'
                    ]
                },
                {
                    'title': '副業やスキルアップで何かしてる？',
                    'content': '将来のために何か副業やスキルアップをしている方いますか？どんなことをしているか教えてください。',
                    'category': 'プライベート',
                    'answers': [
                        '私は美容系の資格取得に力を入れています。まずはネイリストの資格を取得して、休日は友人や知人の施術をしています。最終的には自分のサロンを持つのが目標です。キャバクラで培った接客スキルも活かせると思っています。',
                        'FXと株式投資を始めました。稼いだお金をただ使うだけではなく、増やす方法を学びたいと思って。まだ大きな利益は出ていませんが、経済ニュースを見るようになったり、お金の流れについて考えるようになったのは良い変化だと思います。キャバクラは体力的にも年齢的にも長く続けられる仕事ではないので、次のステップを考えておくことは大事だと思います。'
                    ]
                },
                {
                    'title': '睡眠の質を上げる方法ある？',
                    'content': '夜勤明けでなかなか眠れず、睡眠の質が悪い気がします。皆さんはどうやって質の良い睡眠をとっていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私はブルーライトカットメガネを使っています。帰宅後もスマホやPCを見る時はこれを着用。また、寝る1時間前からはスマホを見ないよう努力しています。寝室は完全に暗くし、アロマディフューザーでラベンダーの香りを焚いています。これで随分と眠りの質が良くなりました。',
                        '睡眠サプリを活用しています。メラトニンやGABAなどの成分が入ったものです。あとは寝る前のホットミルクとストレッチもルーティンにしています。どうしても眠れない日は、諦めて起きて本を読むなど、イライラしないように心がけています。無理に眠ろうとするとかえってストレスになりますよ。'
                    ]
                },
                {
                    'title': '一人暮らしの防犯対策、してる？',
                    'content': '深夜に帰宅することが多いので、防犯面が心配です。一人暮らしの方、どんな対策をしていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私はまず住む場所選びから気をつけました。駅から近く、明るい通りに面している物件を選びました。ドアにはダブルロックと防犯カメラを設置。スマホで映像確認できるタイプです。あとは帰宅時にはタクシーを使い、必ず玄関前まで送ってもらうようにしています。',
                        '防犯ブザーは必ず持ち歩いています。また、SNSでの位置情報共有は絶対にしないようにしています。知り合いのストーカー被害を見てからは特に気をつけるようになりました。あとは変装グッズ（メガネやマスク）を持ち歩き、仕事帰りであることを悟られないよう工夫しています。'
                    ]
                },
                {
                    'title': '貯金のコツ教えてください',
                    'content': 'なかなか貯金が貯まりません。収入は悪くないのに使ってしまいます。効果的な貯金方法や節約術があれば教えてください。',
                    'category': 'プライベート',
                    'answers': [
                        '私は「給料日に即座に一定額を別口座に移す」というシンプルな方法を徹底しています。見えない場所（ネットバンキングのアプリを入れていない銀行）に置いておくと使わなくなります。毎月最低でも収入の30%は貯金に回すように心がけていますよ。',
                        '私は「お金の見える化」が効果的でした。家計簿アプリで支出を全て記録し、何にいくら使っているかを把握することで無駄遣いが減りました。特に「飲み代」「タクシー代」「衝動買い」が多かったので、それぞれに月の上限を決めています。あとは投資信託の積立も始めました。強制的に貯まるシステムが自分には合っているようです。'
                    ]
                },
                {
                    'title': '健康管理、みんなどうしてる？',
                    'content': '不規則な生活で体調を崩しがちです。特に肌荒れや免疫力低下が気になります。皆さんはどんな健康管理をしていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は毎日サプリメントを飲んでいます。ビタミンCとビタミンB群、亜鉛、鉄分が入ったものです。あとは週に2回はジムに行って、筋トレとストレッチをしています。筋肉をつけると免疫力も上がりますし、肌の調子も良くなりました。食事面では野菜ジュースを毎朝飲むようにしていますよ。',
                        '私は月に一度は人間ドックを受けるようにしています。不規則な生活で体調の変化に気づきにくいので、定期的にチェックすることが大切だと思います。あとは十分な水分補給を心がけていて、1日2リットルは飲むようにしています。特に仕事前後は意識的に水を飲むと疲れにくいですよ。'
                    ]
                },
                {
                    'title': '業界を辞めた後のキャリアプラン',
                    'content': 'いずれはこの業界を辞めると思いますが、その後のキャリアについて考えています。皆さんは将来どんな仕事をしたいと思っていますか？また、今からできる準備はありますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は自分のネイルサロンを開きたいと思っています。今はネイリストの資格を取得して、休日に友人や知人の施術をして経験を積んでいます。キャバクラで培った接客スキルや人脈も活かせると思っています。独立する前に貯金目標も決めているので、計画的に進めていますよ。',
                        '私は不動産投資を始めました。最初は小さなアパートから始めて、将来的には複数の物件を持ちたいと考えています。今はお金を稼ぎながら、不動産の勉強会に参加したり、セミナーを受けたりしています。定期的な収入源があれば、次のステップに進む時の精神的な余裕も違うと思います。'
                    ]
                },
                {
                    'title': '同業者との友人関係、難しい？',
                    'content': '同じ業界の友人との付き合い方について悩んでいます。仕事の愚痴を言い合ったり、情報交換するのは良いのですが、時々競争意識や嫉妬が生まれることもあって。皆さんはどう付き合っていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は同業者の友人とは「深入りしない」ことを心がけています。例えば、具体的な売上や指名数などはあまり話さないようにして、プライベートな話題を中心にしています。競争ではなく、お互いに応援し合える関係が理想ですよね。',
                        '私は店が違う同業者との交流を大切にしています。同じ店だと競争意識が生まれやすいですが、違うお店の子だと純粋に情報交換や悩み相談ができます。共通の趣味や目標を持つ友人を見つけると、より深い関係を築けると思います。'
                    ]
                },
                {
                    'title': '休日の美容メンテナンスどうしてる？',
                    'content': '休日に効率よく美容メンテナンスするコツはありますか？エステ、ネイル、ヘアサロンなど、どのようなスケジュールで通っていますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は「月に1回の集中メンテナンスデー」を設けています。その日は朝からマツエク、エステ、ネイルを一気に済ませます。施術者には事前に「時間を詰めてほしい」とお願いしているので、移動時間も含めて効率良くできます。あとは毎日の自宅ケアも大切にしています。',
                        '私は縮毛矯正、カラーリング、トリートメントなど時間のかかるヘアケアは月1回、マツエクは2週間に1回、ネイルは3週間に1回、フェイシャルは週1回と、メニューによって頻度を分けています。予約は次回分をその場で取っておくのがおすすめです。急に行きたいと思っても予約が取れないことが多いので。'
                    ]
                },
                {
                    'title': '心が疲れた時の立て直し方',
                    'content': '最近メンタル的に疲れていて、仕事のモチベーションが下がっています。みなさんは心が疲れた時、どうやって立て直していますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は思い切って「何もしない日」を作ります。誰にも会わず、SNSも見ず、ただベッドでゴロゴロしたり、好きな映画を見たり。社会的な期待から完全に解放される時間が必要なんです。あとは、自然の中に行くのも効果的です。森や海など、広い場所に行くと心がリセットされる気がします。',
                        '私はカウンセリングに通っています。最初は抵抗がありましたが、第三者に話を聞いてもらうことで気持ちが整理できます。また、「自分を甘やかす日」を作るのも大切です。好きなスイーツを食べたり、少し高めのマッサージに行ったり。自分を大切にすることで、また頑張る力が湧いてきます。'
                    ]
                },
                {
                    'title': '仕事用LINEとプライベート、使い分けてる？',
                    'content': 'お客様とのLINEとプライベートのLINEを分けていますか？どうやって管理していますか？',
                    'category': 'プライベート',
                    'answers': [
                        '私は完全に分けています。仕事用とプライベート用で別々のスマホを持っています。少し面倒かもしれませんが、精神衛生上とても良いです。休日は仕事用のスマホの電源を切ることもあり、オンとオフの切り替えができます。',
                        '私はLINEのアカウントを2つ持っています。同じスマホでも、ビジネス用とプライベート用を切り替えられるので便利です。通知音も変えているので、どちらからのメッセージかすぐわかります。ただし、アイコンや背景は似たようなものにして、間違えて送信しないよう注意しています。'
                    ]
                },
            ]
            
            # 質問と回答の作成
            for data in additional_data:
                # 同じタイトルの質問が既に存在するかチェック
                existing_q = Question.query.filter_by(title=data['title']).first()
                if not existing_q:
                    q = Question(
                        title=data['title'],
                        content=data['content'],
                        user_id=user.id,
                        category_id=categories[data['category']].id,
                        is_deleted=False
                    )
                    db.session.add(q)
                    db.session.flush()  # IDを取得するためにflush
                    
                    # 回答の作成
                    for answer_text in data['answers']:
                        a = Answer(
                            content=answer_text,
                            question_id=q.id,
                            user_id=user.id,
                            is_deleted=False
                        )
                        db.session.add(a)
            
            db.session.commit()
            print('追加テストデータを投入しました')
            return True
            
        except Exception as e:
            db.session.rollback()
            print(f'追加データ投入エラー: {str(e)}')
            return False

if __name__ == '__main__':
    insert_additional_data()
