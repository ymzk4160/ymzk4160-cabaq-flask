{% extends 'base.html' %}

{% block title %}ã‚­ãƒ£ãƒå¬¢Q&A - åŒ¿åæ²ç¤ºæ¿{% endblock %}

{% block head_js %}
<script>
  function filterCategory(category) {
    const items = document.querySelectorAll('.qa-item');
    items.forEach(item => {
      if (category === 'all' || item.dataset.category === category) {
        item.classList.remove('hidden');
      } else {
        item.classList.add('hidden');
      }
    });

    const buttons = document.querySelectorAll('.category-button');
    buttons.forEach(btn => btn.classList.remove('bg-pink-400', 'text-white'));
    const activeBtn = document.querySelector(`[data-category-btn="${category}"]`);
    if (activeBtn) activeBtn.classList.add('bg-pink-400', 'text-white');
  }
</script>
{% endblock %}

{% block content %}
  <!-- ä¼šå“¡ç™»éŒ²æ¡ˆå†… -->
<section class="bg-pink-100 text-center p-4 text-sm">
  <p class="mb-1 font-semibold">ğŸ” ã“ã®å…ˆã®Q&Aã‚’ã‚‚ã£ã¨èª­ã¿ãŸã„ï¼Ÿ</p>
  <p class="mb-1">
    ç°¡å˜ãªä¼šå“¡ç™»éŒ²ã§ <span class="font-bold">æœ€åˆã®10æ—¥é–“ã¯ç„¡æ–™</span>ï¼<br>
    ãã®å¾Œã€åˆå›3ã‹æœˆã¯æœˆé¡ <span class="font-bold">1,000å††</span>ã€<br>
    ä»¥é™ã‚‚æœˆé¡ <span class="font-bold">1,000å††</span> ã§ã™ã¹ã¦è¦‹æ”¾é¡Œã«âœ¨
  </p>
  <p class="mb-1 text-xs text-gray-600">â€»ç„¡æ–™ä¼šå“¡ç™»éŒ²ã¯æ•°ç§’ã§å®Œäº†ã€æ”¯æ‰•ã„æƒ…å ±ã®ç™»éŒ²ã¯ä¸è¦ã§ã™ã€‚</p>
  <p class="mb-1 text-xs text-gray-600">â€»ç¶™ç¶šåˆ©ç”¨ã”å¸Œæœ›ã®å ´åˆã«ã¯ã€æ”¯æ‰•ã„æƒ…å ±ã®ç™»éŒ²ãŒå¿…è¦ã§ã™ã€‚</p>
  <p class="mb-1 text-xs text-gray-600">â€»æ”¯æ‰•ã„æƒ…å ±ãŒæœªç™»éŒ²ã®å ´åˆã€10æ—¥å¾Œã«åˆ©ç”¨ä¸å¯ã¨ãªã‚Šã¾ã™ã€‚</p>
  <button class="mt-2 bg-pink-400 hover:bg-pink-500 text-white text-sm px-6 py-2 rounded-full">
    ä»Šã™ãç„¡æ–™ä¼šå“¡ç™»éŒ²
  </button>
</section>

<!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼ˆæ¨ª2æ®µãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»æ–‡å­—æ•°ãƒãƒ©ãƒ³ã‚¹æœ€é©åŒ–ï¼‰ -->
<div class="p-2 bg-white shadow">
<!-- 1æ®µç›® -->
    <div class="flex justify-left space-x-2 mb-2">
    <button onclick="filterCategory('all')" class="category-button bg-pink-400 text-white text-sm px-3 py-1 rounded-full" data-category-btn="all">ã™ã¹ã¦</button>
  </div>
<!-- 2æ®µç›® -->
  <div class="flex justify-center space-x-2 mb-2">
    <button onclick="filterCategory('åˆå¿ƒè€…')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="åˆå¿ƒè€…">åˆå¿ƒè€…</button>
    <button onclick="filterCategory('å–¶æ¥­')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="å–¶æ¥­">å–¶æ¥­</button>
    <button onclick="filterCategory('å‡ºå‹¤')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="å‡ºå‹¤">å‡ºå‹¤</button>
    <button onclick="filterCategory('ãƒ¡ãƒ³ã‚¿ãƒ«')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="ãƒ¡ãƒ³ã‚¿ãƒ«">ãƒ¡ãƒ³ã‚¿ãƒ«</button>
    <button onclick="filterCategory('åº—ä¸æº€')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="åº—ä¸æº€">åº—ã¸ã®ä¸æº€</button>
  </div>
<!-- 3æ®µç›® -->
  <div class="flex justify-center space-x-2">
    <button onclick="filterCategory('èº«ãƒãƒ¬')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="èº«ãƒãƒ¬">èº«ãƒãƒ¬</button>
    <button onclick="filterCategory('ãƒãƒ¼ã‚¹ãƒ‡ã‚¤')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="ãƒãƒ¼ã‚¹ãƒ‡ã‚¤">ãƒãƒ¼ã‚¹ãƒ‡ã‚¤</button>
    <button onclick="filterCategory('ç¾å®¹')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="ç¾å®¹">ç¾å®¹</button>
    <button onclick="filterCategory('æ‹æ„›')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="æ‹æ„›">æ‹æ„›</button>
    <button onclick="filterCategory('ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ')" class="category-button bg-pink-200 hover:bg-pink-300 text-sm px-3 py-1 rounded-full" data-category-btn="ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ">ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ</button>
  </div>
</div>

<!-- æœ€æ–°Q&Aãƒªã‚¹ãƒˆ -->
  <section class="p-3">
    <h2 class="text-lg font-bold mb-3">ğŸ“Œ æœ€æ–°ã®è³ªå•ï¼ˆ{{ questions|length }}ä»¶ï¼‰</h2>
    <div class="space-y-3">
      {% if questions %}
        {% for question in questions %}
          <div class="qa-item bg-white p-3 rounded-xl shadow" data-category="{{ question.category }}">
            <h3 class="font-semibold text-base">Q. {{ question.title }}</h3>
            <p class="text-xs text-gray-500 mb-1">ğŸ’¬ å›ç­”æ•°ï¼š{{ question.answer_count }}ä»¶</p>
            {% if question.answers %}
              <p class="mt-1 text-sm text-gray-800">A. {{ question.answers[0].content|truncate(50) }}</p>
            {% else %}
              <p class="mt-1 text-sm text-gray-500 italic">ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <div class="text-center py-4 bg-white rounded-xl shadow">
          <p class="text-gray-500">ã¾ã è³ªå•ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
          <button class="mt-2 bg-pink-400 hover:bg-pink-500 text-white text-sm px-6 py-2 rounded-full">æœ€åˆã®è³ªå•ã‚’æŠ•ç¨¿ã™ã‚‹</button>
        </div>
      {% endif %}
    </div>
  </section>
{% endblock %}
